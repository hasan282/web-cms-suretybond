$(function(){if($(".inputmask").inputmask().on("input",function(){var t;let e=$(this).val();$("#submitotp").prop("disabled",""==e||1e5>parseInt(e.replace(/[_\s+]/g,"")))}),$("#sendbox").length>0){let t={};t[$("#sendbox").data("name")]=$("#sendbox").data("csrf"),setTimeout(()=>{$.post(BaseURL+"setting/verification/send/email",t,function(t,e){"success"==e&&t.status.insert?($("#countdown").data("cd",900),$("#sendbox").html(""),$("#verifybox").removeClass("hide-content"),setCountdown()):t.status.sendmail?$("#sendbox").html('<p class="text-danger">Database ERROR, please contact administrator!</p>'):t.status.userdata?($("#sendbox").html(""),$("#sendfailed").removeClass("hide-content")):window.location.reload()}).fail(()=>{$("#sendbox").html(""),$("#connectfailed").removeClass("hide-content")})},200)}0!=$("#countdown").data("cd")&&setCountdown()});function setCountdown(){let t=setInterval(function(){let e=$("#countdown").data("cd"),n=Math.floor(e/60),o=Math.floor(e%60);n<1&&$("#countdown").removeClass("text-primary").addClass("text-danger"),n<10&&(n="0"+n),o<10&&(o="0"+o),$("#countdown").html(n+" : "+o),$("#countdown").data("cd",e-1),e<=0&&(clearInterval(t),$("#countdown").html('Your OTP code is expired, <a href="/setting/verification/email">resend OTP</a> code to email.'),$("#submitotp").prop("disabled",!0),$(".inputmask").val("").prop("disabled",!0))},1e3)}